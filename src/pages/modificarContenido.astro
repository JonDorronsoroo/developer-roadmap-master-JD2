---
import SimplePageHeader from "../components/SimplePageHeader.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCategoriaInformacionRoadmap, updateCategoriaNombreDescripcion } from "../database/consultas";
import { redirectToDefaultLocale } from "astro:i18n";


export const prerender = false

const informacion = await getCategoriaInformacionRoadmap('git')

if (Astro.request.method === 'POST') {
    try{
        const data = await Astro.request.formData();
        const categoria = data.get('categoria')?.toString();
        const descripcion = data.get('descripcion')?.toString();
        if(categoria && descripcion && categoria.length > 0 && descripcion.length > 0){
            await updateCategoriaNombreDescripcion( 'git', categoria, descripcion)
        }

        return Astro.redirect('/roadmaps')
    
    }catch(e){
        console.log(e)
    }
}
---
<BaseLayout title='Modificar la información' permalink={'/modificarContenido'}>
    <SimplePageHeader
    title='Developer Roadmaps'
    description='Modificar la información/contenido'
  />

  <form method="POST">
    
    <label>
      Título:
      <textarea id="categoria" rows="10" cols="20">{informacion?.idNombre}</textarea>
    </label>
    <br>
    <label>
      Descripción:
      <textarea name="descripcion" rows="10" cols="70">{informacion?.descripcion}</textarea>
    </label>
    <br>

    <label>
        Añadir recurso: <div class="select-box">
            <input type="search" class="search-box" placeholder="Search...">
            <select class="options-list" size="5" multiple>
              <option value="1">Option 1</option>
              <option value="2">Option 2</option>
              <option value="3">Option 3</option>
              <option value="4">Option 4</option>
              <option value="5">Option 5</option>
            </select>
          </div>
    </label>
    
    <button>Guardar</button>
    </form>


</BaseLayout>