---
import SimplePageHeader from "../../components/SimplePageHeader.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCategoriaInformacionRoadmap,} from "../../database/consultas";
import '../../styles/formulario.css'


const { request } = Astro;
const url = new URL(request.url);
const searchParams = new URLSearchParams(url.search);
let categoriaName = searchParams.get('title');

categoriaName = categoriaName?.replace(/^'|'$/g, '') || '';
const informacion = await getCategoriaInformacionRoadmap(categoriaName || '')
console.log(categoriaName)


---
<BaseLayout title='Modificar la información' permalink={'/modificar/contenidoCategoria'}>
    <SimplePageHeader
    title='Developer Roadmaps'
    description='Modificar la información/contenido'
  />

  <form method ="POST" class="form-container" action="/api/modificar">
    <input type="hidden" name="formType" value="contenidoCategoria" />
    <input type="hidden" name="oldCategoria" value={categoriaName} />
<fieldset>
      <label class="required-field" for="categoria">Título:</label>
            <input
                type="text"
                id="categoria"
                name="categoria"
               value={informacion?.idNombre}
                required
                aria-required="true"
            ></input>

            <label class="required-field" for="descripcion">Descripción:</label>
            <textarea
                id="descripcion"
                name="descripcion"
              
                rows="4"
            cols="50"
                required

            >{informacion?.descripcion}</textarea>
    </fieldset>
    
    <div class="button-container">
      <button type="submit">Guardar</button>
  </div>

  

  <div id="correct-message" class="message success"></div>
  <div id="error-message" class="message error"></div>

  </form>

</BaseLayout>